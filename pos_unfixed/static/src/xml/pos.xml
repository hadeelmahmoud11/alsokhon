<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">



  <t t-extend="PaymentScreenWidget">
      <t t-jquery='.payment-buttons' t-operation='append'>
        <!-- <t t-if="widget.pos.get_order().order_type == 'sale'"> -->
          <div class='button unfixed_product' >
              <i class='fa fa-tag' role="img" aria-label="Customer" title="Unfixed"/>
              Unfixed
          </div>
        </t>

      <!-- </t> -->
  </t>
  <t t-extend="OrderReceipt">
    <t t-jquery='.pos-receipt' t-operation='replace'>
      <div class="pos-receipt">
          <t t-if='receipt.company.logo'>
              <img class="pos-receipt-logo" t-att-src='receipt.company.logo' alt="Logo"/>
              <br/>
          </t>
          <t t-if='!receipt.company.logo'>
              <h2 class="pos-receipt-center-align">
                  <t t-esc='receipt.company.name' />
              </h2>
              <br/>
          </t>
          <div class="pos-receipt-contact">
              <t t-if='receipt.company.contact_address'>
                  <div><t t-esc='receipt.company.contact_address' /></div>
              </t>
              <t t-if='receipt.company.phone'>
                  <div>Tel:<t t-esc='receipt.company.phone' /></div>
              </t>
              <t t-if='receipt.company.vat'>
                  <div><t t-esc='receipt.company.vat_label'/>:<t t-esc='receipt.company.vat' /></div>
              </t>
              <t t-if='receipt.company.email'>
                  <div><t t-esc='receipt.company.email' /></div>
              </t>
              <t t-if='receipt.company.website'>
                  <div><t t-esc='receipt.company.website' /></div>
              </t>
              <t t-if='receipt.header_html'>
                  <t t-raw='receipt.header_html' />
              </t>
              <t t-if='!receipt.header_html and receipt.header'>
                  <div><t t-esc='receipt.header' /></div>
              </t>
              <t t-if='receipt.cashier'>
                  <div class='cashier'>
                      <div>--------------------------------</div>
                      <div>Served by <t t-esc='receipt.cashier' /></div>
                  </div>
              </t>
          </div>
          <br /><br />

          <!-- Orderlines -->
          <t t-set='unfixed_total' t-value='0' />
          <!-- <t t-set='taxincluded' t-value='Math.abs(receipt.subtotal - receipt.total_with_tax) &lt;= 0.000001' /> -->


          <div class='orderlines'>
              <t t-foreach='receipt.orderlines' t-as='line'>
                <t t-if="!line.is_unfixed">

                  <t t-set='simple' t-value='(line.discount === 0 and line.unit_name === "Units" and line.quantity === 1 and !discount_to_show and !(line.display_discount_policy == "without_discount" &amp;&amp; line.price != line.price_lst))' />
                  <t t-if='simple'>
                      <div><t t-esc='line.product_name_wrapped[0]' /><span t-esc='widget.format_currency_no_symbol(line.price_display)' class="price_display pos-receipt-right-align"/></div><t t-call="OrderReceiptWrappedProductNameLines"/>
                  </t>
                  <t t-if='!simple'>
                      <div t-esc='line.product_name_wrapped[0]'/><t t-call="OrderReceiptWrappedProductNameLines"/><t t-if="line.display_discount_policy == 'without_discount' &amp;&amp; line.price != line.price_lst"><div class="pos-receipt-left-padding"><t t-esc="widget.format_currency_no_symbol(line.price_lst)" />-><t t-esc="widget.format_currency_no_symbol(line.price)" /></div>
                      </t>
                      <t t-elif='line.discount !== 0'>
                          <div class="pos-receipt-left-padding">
                              <t t-if="pos.config.iface_tax_included === 'total'">
                                  <t t-esc="widget.format_currency_no_symbol(line.price_with_tax_before_discount)"/>
                              </t>
                              <t t-else="">
                                  <t t-esc="widget.format_currency_no_symbol(line.price)"/>
                              </t>
                          </div>
                      </t>
                      <t t-if='line.discount !== 0'>
                          <div class="pos-receipt-left-padding">
                              Discount: <t t-esc='line.discount' />%
                          </div>
                      </t>
                      <div class="pos-receipt-left-padding">
                          <t t-esc="Math.round(line.quantity * Math.pow(10, pos.dp['Product Unit of Measure'])) / Math.pow(10, pos.dp['Product Unit of Measure'])"/>
                          <t t-if='line.unit_name !== "Units"' t-esc='line.unit_name'/>
                          x
                          <t t-esc='widget.format_currency_no_symbol(line.price_display_one)' />
                          <span class="price_display pos-receipt-right-align">
                              <t t-esc='widget.format_currency_no_symbol(line.price_display)'/>
                          </span>
                      </div>
                  </t>
                </t>
                <t t-else="">
                  <!-- <span t-esc='widget.format_currency_no_symbol(line.price_display)' class="price_display pos-receipt-right-align"/> -->
                  <t t-set="unfixed_total" t-value="(unfixed_total + line.price_display)"/>
                </t>

              </t>
          </div>

          <!-- Subtotal -->

          <t t-set='taxincluded' t-value='Math.abs(receipt.subtotal - receipt.total_with_tax) &lt;= 0.000001' />
          <t t-if='!taxincluded'>
              <div class="pos-receipt-right-align">--------</div>
              <br/>
              <div>Subtotal<span t-esc='widget.format_currency(receipt.subtotal)' class="pos-receipt-right-align"/></div>
              <t t-foreach='receipt.tax_details' t-as='tax'>
                  <div>
                      <t t-esc='tax.name' />
                      <span t-esc='widget.format_currency_no_symbol(tax.amount)' class="pos-receipt-right-align"/>
                  </div>
              </t>
          </t>

          <!-- Total -->

          <!-- <div >
              Unfixed
              <span t-esc='widget.format_currency_no_symbol(-1*unfixed_total)' class="pos-receipt-right-align"/>
          </div> -->
          <div class="pos-receipt-right-align">--------</div>
          <br/>
          <div class="pos-receipt-amount">
              TOTAL
              <span t-esc='widget.format_currency(receipt.total_with_tax-unfixed_total)' class="pos-receipt-right-align"/>
          </div>
          <br/><br/>

          <!-- Payment Lines -->

          <t t-foreach='paymentlines' t-as='line'>
              <div>
                  <t t-esc='line.name' />
                  <span t-esc='widget.format_currency_no_symbol(line.get_amount())' class="pos-receipt-right-align"/>
              </div>
          </t>

          <t t-if='unfixed_total !== 0'>
            <div >
                Unfixed
                <span t-esc='widget.format_currency_no_symbol(-1*unfixed_total)' class="pos-receipt-right-align"/>
            </div>
          </t>

          <br/>

          <div class="pos-receipt-amount receipt-change">
              CHANGE
              <span t-esc='widget.format_currency(receipt.change)' class="pos-receipt-right-align"/>
          </div>
          <br/>

          <!-- Extra Payment Info -->

          <t t-if='receipt.total_discount'>
              <div>
                  Discounts
                  <span t-esc='widget.format_currency(receipt.total_discount)' class="pos-receipt-right-align"/>
              </div>
          </t>
          <t t-if='taxincluded'>
              <t t-foreach='receipt.tax_details' t-as='tax'>
                  <div>
                      <t t-esc='tax.name' />
                      <span t-esc='widget.format_currency_no_symbol(tax.amount)' class="pos-receipt-right-align"/>
                  </div>
              </t>
              <div>
                  Total Taxes
                  <span t-esc='widget.format_currency(receipt.total_tax)' class="pos-receipt-right-align"/>
              </div>
          </t>

          <div class='before-footer' />

          <!-- Footer -->
          <div t-if='receipt.footer_html'  class="pos-receipt-center-align">
              <t t-raw='receipt.footer_html'/>
          </div>

          <div t-if='!receipt.footer_html and receipt.footer'  class="pos-receipt-center-align" style="white-space:pre-line">
              <t t-esc='receipt.footer'/>
          </div>
          <br/>

          <div class='after-footer'>
              <t t-foreach='paymentlines' t-as='line'>
                  <t t-if='line.ticket'>
                      <br />
                      <div class="pos-payment-terminal-receipt">
                          <t t-raw='line.ticket'/>
                      </div>
                  </t>
              </t>
          </div>

          <br/>
          <div class="pos-receipt-order-data">
              <div><t t-esc='receipt.name' /></div>
              <div><t t-esc='receipt.date.localestring' /></div>
          </div>

      </div>
    </t>

  </t>
  <!-- <t t-name="TypeButton">
		<div class='control-button '>
			<i class='fa fa-tag' />

      <t t-esc='widget.get_current_type()'/>
		</div>
	</t> -->
  <t t-name="retailButton">
		<div class='control-button retail_bt' style='background: #6EC89B;'>
			<i class='fa fa-tag ' />
      <!-- <t t-if="widget.pos.get_order().order_type">
          <t t-esc="widget.pos.get_order().order_type" />
      </t>
      <t t-if="!widget.pos.get_order().order_type">
           Order Type
      </t> -->
      Retail
		</div>
	</t>
  <t t-name="saleButton">
		<div class='control-button wSale_bt'>
			<i class='fa fa-tag  ' />
      <!-- <t t-if="widget.pos.get_order().order_type">
          <t t-esc="widget.pos.get_order().order_type" />
      </t>
      <t t-if="!widget.pos.get_order().order_type">
           Order Type
      </t> -->
      Whole Sale
		</div>
	</t>


  <t t-extend="PackLotLinePopupWidget">
      <t t-jquery='.modal-dialog' t-operation='replace'>
          <div class="modal-dialog">
              <div class="popup popup-text" style="width:900px;height: 540px;">
                  <p class="title"><t t-esc=" widget.options.title || '' " /></p>
                  <div class='packlot-lines' style="width: 350px;float: left;">
                      <t t-if="widget.options.pack_lot_lines">
                          <t t-set="focus_lot_line" t-value="widget.focus_model || widget.options.pack_lot_lines.get_empty_model()"/>
                          <t t-foreach='widget.options.pack_lot_lines.models' t-as='lot_line'>
                              <input type="text" t-att-cid="lot_line.cid"
                                  t-att-value="lot_line.get('lot_name')"
                                  t-att-autofocus="lot_line === focus_lot_line ? 'autofocus': undefined"
                                  class="popup-input packlot-line-input"
                                  placeholder="Serial/Lot Number"/>
                              <i class="oe_link_icon remove-lot fa fa-trash-o"></i>
                          </t>
                      </t>
                  </div>
                  <div style="width: 500px;float: right;height: 416px;">
                      <t t-if="widget.pos.config.allow_pos_lot">
                          <t t-if="widget.options.product_lot">
                              <div >
                                <!-- <span style="width: 5%;">
                                  Is Return Product:
                                  <i class="is_return_bt"  style="color: green;font-size: 25px;cursor: pointer" >False</i>
                                </span> -->
                                <input placeholder="Search Lot" style="width: 160px;
                                      border: 1px solid #cecbcb;
                                      padding: 10px 20px;
                                      padding-left: 38px;
                                      margin: 6px;
                                      background-color: white;
                                      border-radius: 20px;
                                      font-family: Helvetica, Verdana, Arial;
                                      font-size: 13px;" class="search_lot" t-att-value="widget.options.qstr"/>
                                  <span class="search-clear search_lot"></span>


                                  <t t-if="widget.options.order_line.is_unfixed">
                                    <span class='button new-lot' role="img" aria-label="Add a Lot" title="Add a Lot" style="width: 20%;cursor: pointer">
                                        Add Lot
                                        <i class='fa fa-plus'></i>
                                    </span>
                                  </t>

                                <!-- background: url(/point_of_sale/static/src/css/../img/search.png) no-repeat 15px; -->



                                  <!-- <input type="checkbox" id="oe_import_trackingaa" />
                                  <input type="checkbox" id="oe_import_trackingaas" class="fa fa-check"  /> -->
                                  <!-- class="fa fa-check" -->
                              </div>
                              <div style="height: 360px;overflow: scroll;">
                                  <table >
                                      <colgroup >
                                          <!-- <col width='20%' />
                                          <col width='15%' />
                                          <col width='15%' />
                                          <col width='15%' />
                                          <col width='15%' />
                                          <col width='15%' />
                                          <col width='15%' /> -->
                                          <td>Lot</td>
                                          <td>Quantity</td>
                                          <!-- <td><t t-esc="widget.options.order_line.product.categ.is_diamond" /></td> -->
                                          <t t-if="widget.options.order_line.product.categ.is_gold">
                                            <td>Gross Weight</td>
                                            <td>Purity</td>
                                            <td>Pure Weight</td>
                                            <td>Making Charge</td>
                                            <td>Gold Rate</td>
                                          </t>
                                          <t t-if="widget.options.order_line.product.categ.is_scrap">
                                            <td>Gross Weight</td>
                                            <td>Purity</td>
                                            <td>Pure Weight</td>
                                            <td>Gold Rate</td>
                                          </t>
                                          <t t-if="widget.options.order_line.product.categ.is_assembly">
                                            <td>Gross Weight</td>
                                            <td>Purity</td>
                                            <td>Pure Weight</td>
                                            <td>Gold Rate</td>
                                            <td>Diamond Carat</td>
                                          </t>
                                          <t t-if="widget.options.order_line.product.categ.is_diamond">
                                            <td>Diamond Carat</td>
                                            <!-- <td>Diamond Wt</td> -->
                                            <td>Making Charge</td>
                                          </t>
                                      </colgroup>

                                      <t t-foreach="widget.options.product_lot" t-as="product_lot">
                                          <tr style="font-size: 12px;">
                                            <t t-set="making_charge" t-value="product_lot.selling_making_charge*product_lot.gross_weight"/>
                                            <!-- <t t-if="product_lot.total_qty>0 || widget.options.order_line.is_unfixed"> -->
                                                <td>
                                                    <div t-att-value="product_lot.id">
                                                        <t t-esc="product_lot.name" />
                                                    </div>
                                                </td>
                                                <td id="total_qty">
                                                    <t t-esc="product_lot.total_qty" />
                                                </td>
                                                <t t-if="widget.options.order_line.product.categ.is_gold">
                                                  <td id="gross_weight">
                                                      <t t-esc="product_lot.gross_weight" />
                                                  </td>
                                                  <td id="purity_id">
                                                      <t t-esc="product_lot.purity_id[1]" />
                                                  </td>
                                                  <td id="pure_weight">
                                                      <t t-esc="product_lot.pure_weight"/>
                                                  </td>
                                                  <td id="selling_making_charge">
                                                      <t t-esc="making_charge" />
                                                  </td>
                                                  <!-- <td id="selling_making">
                                                      <t t-esc="product_lot.selling_making_charge" />
                                                  </td> -->
                                                  <td id="gold_rate">
                                                      <t t-esc="widget.pos.config.gold_rate" />
                                                  </td>
                                                </t>
                                                <t t-if="widget.options.order_line.product.categ.is_scrap">
                                                  <td id="gross_weight">
                                                      <t t-esc="product_lot.gross_weight" />
                                                  </td>
                                                  <td id="purity_id">
                                                      <t t-esc="product_lot.purity_id[1]" />
                                                  </td>
                                                  <td id="pure_weight">
                                                      <t t-esc="product_lot.pure_weight"/>
                                                  </td>

                                                  <td id="gold_rate">
                                                      <t t-esc="widget.pos.config.gold_rate" />
                                                  </td>
                                                </t>
                                                <t t-if="widget.options.order_line.product.categ.is_assembly">
                                                  <td id="gross_weight">
                                                      <t t-esc="product_lot.gross_weight" />
                                                  </td>
                                                  <td id="purity_id">
                                                      <t t-esc="product_lot.purity_id[1]" />
                                                  </td>
                                                  <td id="pure_weight">
                                                      <t t-esc="product_lot.pure_weight"/>
                                                  </td>
                                                  <td id="gold_rate">
                                                      <t t-esc="widget.pos.config.gold_rate" />
                                                  </td>
                                                  <td id="carat">
                                                      <t t-esc="product_lot.carat" />
                                                  </td>
                                                </t>
                                                <t t-if="widget.options.order_line.product.categ.is_diamond">
                                                  <td id="carat">
                                                      <t t-esc="product_lot.carat" />
                                                  </td>
                                                  <!-- <td id="carat_wt">
                                                      <t t-esc="product_lot.carat_wt" />
                                                  </td> -->
                                                  <td id="selling_making">
                                                      <t t-esc="product_lot.selling_making_charge" />
                                                  </td>
                                                </t>
                                                <!-- <span id="gold_rate" ><t t-esc="product_lot.gold_rate" class="display:none;"/></span> -->
                                                <td>
                                                    <input type="text" value="1" style="font-size: 15px;width: 52px;min-height: 9px;height: 25px;padding: -1px;"/>
                                                </td>
                                                <td>
                                                   <i class="fa fa-plus-square add_lot_number" aria-hidden="true" style="color: green;font-size: 25px;cursor: pointer" t-att-data-lot="product_lot.name"></i>
                                                </td>
                                              <!-- </t> -->
                                          </tr>
                                      </t>

                                      <t t-if="widget.options.order_line.is_unfixed">
                                        <tr class="new_lot" style="font-size: 12px;display: none;">
                                          <td id="name_in">
                                            <input class="name_lot"  type="text" value="lot" style="font-size: 15px;text-align: center;"/>
                                          </td>
                                          <td>
                                          </td>
                                          <td>
                                          </td>
                                          <!-- <td id="gross_weight_in">
                                            <input class="gr_wight"  type="text" value="1" style="font-size: 15px;text-align: center;"/>
                                          </td> -->
                                          <td id="purity_id_in">
                                            <input class="puri" type="text" value="1" style="font-size: 15px;text-align: center;"/>
                                          </td>
                                          <!-- <td id="pure_weight_in">
                                            <input class="pr_wight" type="text" value="1" style="font-size: 15px;text-align: center;"/>
                                          </td> -->
                                          <td >
                                          </td>

                                          <td >
                                          </td>
                                        </tr>

                                      </t>



                                  </table>
                                  <!-- <table >
                                    <thead>
                                      <tr style="background-color: #7f82ac; color: #fff;">
                                        <td>Lot</td>
                                        <td>Quantity</td>
                                        <td>Gross Weight</td>
                                        <td>Purity</td>
                                        <td>Pure Weight</td>
                                        <td>Making Charge</td>
                                      </tr>
                                    </thead>
                                    <tbody class='lots-list-contents'>
                                    </tbody>
                                  </table> -->
                              </div>
                          </t>
                      </t>
                  </div>
                  <div class="footer">
                      <div class="button confirm">
                          Ok
                      </div>
                      <div class="button cancel">
                          Cancel
                      </div>
                  </div>
              </div>
          </div>
      </t>
  </t>


  <t t-name="AddLotWidget">
      <div class="modal-dialog" role="dialog">
          <div class="popup popup-selection add_lot_pos">
              <p class="title">Add New Lot</p>
              <div class='selection scrollable-y touch-scrollable'>
                  <table id="list" cellspacing="1px" cellpadding="10px" text-align="center"
                         width="100%" style="border:1px;padding-left:1.16cm;">
                      <!-- <thead>
                          <tr>
                            <td>Gross Weight</td>
                            <td>Purity</td>
                            <td>Pure Weight</td>
                          </tr>
                      </thead> -->
                      <tbody id="table-body">
                        <tr>
                          <td>Gross Weight</td>
                          <td>
                              <input id="gr_wight"  type="text" value="1" style="font-size: 15px;width: 30%;height: 35px;text-align: center;"/>
                          </td>
                        </tr>
                        <tr>
                          <td>Purity</td>
                          <td>
                              <input id="puri" type="text" value="1" style="font-size: 15px;width: 30%;height: 35px;text-align: center;"/>
                          </td>
                        </tr>
                        <tr>
                          <td>Pure Weight</td>
                          <td>
                              <input id="pr_wight" type="text" value="1" style="font-size: 15px;width: 30%;height: 35px;text-align: center;"/>
                          </td>
                        </tr>
                      </tbody>
                  </table>
              </div>
              <div class="footer">
                  <div class="button confirm">
                          Confirm
                      </div>
                  <div class="button cancel">
                      Cancel
                  </div>
              </div>
          </div>
      </div>
  </t>



</templates>
